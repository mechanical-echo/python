#:kivy 2.0.0
<LoginWindow>:
    username: username
    password: password

    canvas.before:
        Color:
            rgba: (0.95, 0.97, 1, 1)
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.4
            pos_hint: {'x': 0, 'y': 0}
            
            canvas.before:
                Color:
                    rgba: (0.3, 0.4, 0.8, 1)
                Rectangle:
                    pos: self.pos
                    size: self.size

            Image:
                source: './maxwell.gif'
                size_hint: 1, 0.6
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                anim_delay: 0.01
                anim_loop: 0
                allow_stretch: True
                keep_ratio: True

            Label:
                text: "Piezīmes"
                font_size: min(root.width, root.height) * 0.06
                color: (1, 1, 1, 1)
                bold: True
                size_hint_y: 0.2

            Label:
                text: "Organizē savas domas"
                font_size: min(root.width, root.height) * 0.03
                color: (0.9, 0.9, 1, 1)
                halign: 'center'
                size_hint_y: 0.2
                
        BoxLayout:
            orientation: 'vertical'
            size_hint: (0.6, 0.8)
            pos_hint: {'right': 0.95, 'center_y': 0.5}
            padding: dp(40)
            spacing: dp(20)

            Label:
                text: "Laipni lūdzam atpakaļ!"
                font_size: min(root.width, root.height) * 0.06
                color: (0.3, 0.4, 0.8, 1)
                bold: True
                size_hint_y: None
                height: dp(80)
                halign: 'left'
                text_size: self.size
                padding: [dp(40), dp(20)]

            BoxLayout:
                orientation: 'vertical'
                spacing: dp(30)
                padding: [dp(40), dp(0)]
                
                BoxLayout:
                    orientation: 'vertical'
                    spacing: dp(5)
                    size_hint_y: None
                    height: dp(80)

                    Label:
                        text: "Lietotājvārds"
                        font_size: min(root.width, root.height) * 0.035
                        color: (0.3, 0.3, 0.4, 1)
                        bold: True
                        halign: 'left'
                        size_hint_y: None
                        height: dp(30)
                        text_size: self.size

                    CustomTextInput:
                        id: username
                        multiline: False
                        hint_text: "Ievadi lietotājvārdu"
                        font_size: min(root.width, root.height) * 0.035
                        size_hint_y: None
                        height: dp(45)

                BoxLayout:
                    orientation: 'vertical'
                    spacing: dp(5)
                    size_hint_y: None
                    height: dp(80)

                    Label:
                        text: "Parole"
                        font_size: min(root.width, root.height) * 0.035
                        color: (0.3, 0.3, 0.4, 1)
                        bold: True
                        halign: 'left'
                        size_hint_y: None
                        height: dp(30)
                        text_size: self.size

                    CustomTextInput:
                        id: password
                        multiline: False
                        password: True
                        hint_text: "Ievadi paroli"
                        font_size: min(root.width, root.height) * 0.035
                        size_hint_y: None
                        height: dp(45)

                Button:
                    text: "Pieslēgties"
                    font_size: min(root.width, root.height) * 0.045
                    size_hint_y: None
                    height: dp(50)
                    background_color: (0, 0, 0, 0)
                    on_press: root.login_button()
                    canvas.before:
                        Color:
                            rgba: (0.3, 0.4, 0.8, 1)
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(25)]

            Label:
                text: root.status_message
                color: (0.8, 0.2, 0.2, 1)
                font_size: min(root.width, root.height) * 0.035
                size_hint_y: None
                height: dp(30)
                halign: 'center'

<CustomTextInput@TextInput>:
    cursor_color: (0.4, 0.2, 0.6, 1)
    padding: [15, 15]
    background_color: 0, 0, 0, 0
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [15]
        Color:
            rgba: (0.3, 0.4, 0.8, 1) if self.focus else (0.9, 0.9, 0.9, 1)
        Line:
            rounded_rectangle: (self.x, self.y, self.width, self.height, 15)
            width: 1.5 if self.focus else 1
    selection_color: 0.3, 0.4, 0.8, 0.4
    halign: 'left'
    valign: 'center'
    padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]

<NoteCreationWindow>:
    note_text: note_input
    note_title_text: note_title_input
    
    canvas.before:
        Color:
            rgba: (0.95, 0.97, 1, 1)
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "horizontal"
        spacing: dp(20)
        padding: dp(20)
        
        BoxLayout:
            orientation: "vertical"
            size_hint_x: .25
            spacing: dp(15)

            canvas.before:
                Color:
                    rgba: (0.25, 0.25, 0.35, 0.95)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [15]

            Label:
                text: "Jauna piezīme"
                font_size: min(root.width, root.height) * 0.04
                color: (1, 1, 1, 1)
                bold: True
                size_hint_y: None
                height: dp(60)
                padding: [dp(20), 0]

            Button:
                text: "Atpakaļ"
                font_size: min(root.width, root.height) * 0.025
                size_hint_y: None
                height: dp(50)
                background_color: (0, 0, 0, 0)
                on_release: root.back_to_main()
                canvas.before:
                    Color:
                        rgba: (0.8, 0.3, 0.3, 1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

        BoxLayout:
            orientation: "vertical"
            spacing: dp(20)
            padding: [dp(20), dp(10)]

            canvas.before:
                Color:
                    rgba: (0.25, 0.25, 0.35, 0.95)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [15]

            BoxLayout:
                orientation: "vertical"
                spacing: dp(20)
                padding: [dp(20), dp(20)]

                CustomTextInput:
                    id: note_title_input
                    hint_text: "Ievadi piezīmes nosaukumu"
                    font_size: min(root.width, root.height) * 0.035
                    size_hint_y: None
                    height: dp(50)
                    multiline: False

                CustomTextInput:
                    id: note_input
                    hint_text: "Ievadi piezīmes tekstu"
                    font_size: min(root.width, root.height) * 0.035
                    size_hint_y: 0.7
                    multiline: True

                BoxLayout:
                    orientation: "horizontal"
                    size_hint_y: None
                    height: dp(50)
                    spacing: dp(15)

                    Button:
                        text: f'Izvēlies krāsu : {root.chosen_color}'
                        background_color: (0, 0, 0, 0)
                        on_release: root.create_color_dropdown(self)
                        canvas.before:
                            Color:
                                rgba: (0.3, 0.6, 0.9, 1)
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [10]

                    Button:
                        text: f'Izvēlies kategoriju : {root.chosen_category}'
                        background_color: (0, 0, 0, 0)
                        on_release: root.create_category_dropdown(self)
                        canvas.before:
                            Color:
                                rgba: (0.3, 0.6, 0.9, 1)
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [10]

                Button:
                    text: "Saglabāt"
                    font_size: min(root.width, root.height) * 0.035
                    size_hint_y: None
                    height: dp(50)
                    background_color: (0, 0, 0, 0)
                    on_release: root.save_note()
                    canvas.before:
                        Color:
                            rgba: (0.3, 0.8, 0.5, 1)
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [10]

<NotesView>:
    canvas.before:
        Color:
            rgba: root.background_color
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "horizontal"
        spacing: dp(20)
        padding: dp(20)
        
        BoxLayout:
            orientation: "vertical"
            size_hint_x: .25
            spacing: dp(15)
            padding: [dp(10), dp(20)]

            canvas.before:
                Color:
                    rgba: (0.25, 0.25, 0.35, 0.95)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [15]

            BoxLayout:
                orientation: "vertical"
                size_hint_y: .1
                spacing: dp(5)

                Label:
                    text: root.current_user
                    font_size: min(root.width, root.height) * 0.03
                    color: (1, 1, 1, 0.9)
                    bold: True
                    size_hint_y: None
                    height: dp(30)

            BoxLayout:
                orientation: "vertical"
                spacing: dp(10)
                padding: [0, dp(20)]

                Button:
                    text: "Pievienot jaunu piezīmi"
                    font_size: min(root.width, root.height) * 0.025
                    size_hint_y: None
                    height: dp(50)
                    background_color: (0, 0, 0, 0)
                    on_release: root.create_note()
                    canvas.before:
                        Color:
                            rgba: (0.3, 0.6, 0.9, 1)
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [10]

                Button:
                    text: "Rediģēt profilu"
                    font_size: min(root.width, root.height) * 0.025
                    size_hint_y: None
                    height: dp(50)
                    background_color: (0, 0, 0, 0)
                    on_release: root.edit_profile()
                    canvas.before:
                        Color:
                            rgba: (0.4, 0.5, 0.8, 1)
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [10]

                Button:
                    text: "Iestatījumi"
                    font_size: min(root.width, root.height) * 0.025
                    size_hint_y: None
                    height: dp(50)
                    background_color: (0, 0, 0, 0)
                    on_release: root.open_settings()
                    canvas.before:
                        Color:
                            rgba: (0.5, 0.4, 0.7, 1)
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [10]

                Button:
                    text: "Lietotāju pārvaldība"
                    font_size: min(root.width, root.height) * 0.025
                    size_hint_y: None
                    height: dp(50)
                    background_color: (0, 0, 0, 0)
                    on_release: root.open_user_management()
                    opacity: 1 if root.is_admin else 0
                    disabled: not root.is_admin
                    canvas.before:
                        Color:
                            rgba: (0.6, 0.3, 0.6, 1)
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [10]

            Widget:
                size_hint_y: 0.3

            Button:
                text: "Izlogoties"
                font_size: min(root.width, root.height) * 0.025
                size_hint_y: None
                height: dp(50)
                background_color: (0, 0, 0, 0)
                on_release: root.logout_button()
                canvas.before:
                    Color:
                        rgba: (0.8, 0.3, 0.3, 1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

        BoxLayout:
            orientation: "vertical"
            spacing: dp(15)

            BoxLayout:
                size_hint_y: None
                height: dp(60)
                spacing: dp(15)
                padding: [dp(10), dp(10)]

                canvas.before:
                    Color:
                        rgba: (0.25, 0.25, 0.35, 0.95)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

                Label:
                    text: "Manas piezīmes"
                    font_size: min(root.width, root.height) * 0.035
                    color: (1, 1, 1, 1)
                    bold: True
                    size_hint_x: 0.6
                    text_size: self.size
                    halign: 'left'
                    valign: 'center'
                    padding: [dp(20), 0]

                Button:
                    text: "Kārtot pēc datuma"
                    size_hint_x: 0.2
                    background_color: (0, 0, 0, 0)
                    on_press: root.sort_notes_by_date()
                    canvas.before:
                        Color:
                            rgba: (0.3, 0.6, 0.9, 1)
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [8]

                Button:
                    text: "Kārtot pēc nosaukuma"
                    size_hint_x: 0.2
                    background_color: (0, 0, 0, 0)
                    on_press: root.sort_notes_by_title()
                    canvas.before:
                        Color:
                            rgba: (0.3, 0.6, 0.9, 1)
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [8]

            ScrollView:
                do_scroll_x: False
                do_scroll_y: True
                bar_width: dp(10)
                bar_color: (0.3, 0.3, 0.4, 1)
                bar_inactive_color: (0.2, 0.2, 0.3, 1)
                effect_cls: "ScrollEffect"
                scroll_type: ['bars']

                GridLayout:
                    id: notes_container
                    cols: 2
                    spacing: dp(20)
                    padding: dp(20)
                    size_hint_y: None
                    height: self.minimum_height

<NoteItemView>:
    orientation: 'vertical'
    size_hint_y: None
    height: dp(200)
    padding: dp(15)
    spacing: dp(10)

    canvas.before:
        Color:
            rgba: (root.color_red, root.color_green, root.color_blue, 0.95)
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [15]

    BoxLayout:
        size_hint_y: None
        height: dp(35)
        spacing: dp(10)

        Label:
            text: root.note_title
            font_size: min(root.width, root.height) * 0.1
            color: (1, 1, 1, 1)
            bold: True
            text_size: self.size
            halign: 'left'
            valign: 'center'
            size_hint_x: 0.7

        BoxLayout:
            size_hint_x: 0.3
            canvas.before:
                Color:
                    rgba: (1, 1, 1, 0.15)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8]

            Label:
                text: root.note_category
                font_size: min(root.width, root.height) * 0.08
                color: (1, 1, 1, 0.9)
                bold: True

    BoxLayout:
        orientation: 'vertical'
        padding: [dp(5), dp(10)]

        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            bar_width: dp(4)
            bar_color: (1, 1, 1, 0.7)
            bar_inactive_color: (1, 1, 1, 0.3)
            effect_cls: "ScrollEffect"

            Label:
                text: root.note_text
                color: (1, 1, 1, 0.9)
                text_size: self.width - dp(10), None
                size_hint_y: None
                height: self.texture_size[1]
                halign: 'left'
                valign: 'top'
                markup: True

    BoxLayout:
        size_hint_y: None
        height: dp(50)
        spacing: dp(10)

        Label:
            text: root.created_at
            color: (1, 1, 1, 0.7)
            text_size: self.size
            halign: 'left'
            valign: 'center'
            size_hint_x: 0.4

        Widget:
            size_hint_x: 0.2

        Button:
            text: 'Edit'
            size_hint_x: 0.2
            background_color: 0, 0, 0, 0
            on_release: root.edit_note()
            canvas.before:
                Color:
                    rgba: (1, 1, 1, 0.2)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8]

        Button:
            text: 'Delete'
            size_hint_x: 0.2
            background_color: 0, 0, 0, 0
            on_release: root.delete_note()
            canvas.before:
                Color:
                    rgba: (1, 1, 1, 0.2)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8]

<WindowManager>:
    LoginWindow:
        name: 'login'
    NoteCreationWindow:
        name: 'note_creation'
    NotesView:
        name: 'notes_view'
    NoteEditWindow:
        name: 'note_edit'
    UserEditWindow:
        name: 'user_edit'
    SettingsWindow:
        name: 'settings_window'
    UserView:
        name: 'user_view'

<NoteEditWindow>:
    note_text: note_input
    note_title_text: note_title_input
    
    canvas.before:
        Color:
            rgba: (0.95, 0.97, 1, 1) 
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "horizontal"
        spacing: dp(20)
        padding: dp(20)
        
        BoxLayout:
            orientation: "vertical"
            size_hint_x: .25
            spacing: dp(15)

            canvas.before:
                Color:
                    rgba: (0.25, 0.25, 0.35, 0.95)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [15]

            Label:
                text: "Rediģēt piezīmi"
                font_size: min(root.width, root.height) * 0.04
                color: (1, 1, 1, 1)
                bold: True
                size_hint_y: None
                height: dp(60)
                padding: [dp(20), 0]

            Button:
                text: "Atpakaļ"
                font_size: min(root.width, root.height) * 0.025
                size_hint_y: None
                height: dp(50)
                background_color: (0, 0, 0, 0)
                on_release: root.back_to_main()
                canvas.before:
                    Color:
                        rgba: (0.8, 0.3, 0.3, 1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

        BoxLayout:
            orientation: "vertical"
            spacing: dp(20)
            padding: [dp(20), dp(10)]

            canvas.before:
                Color:
                    rgba: (0.25, 0.25, 0.35, 0.95)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [15]

            BoxLayout:
                orientation: "vertical"
                spacing: dp(20)
                padding: [dp(20), dp(20)]

                BoxLayout:
                    orientation: "vertical"
                    spacing: dp(5)
                    size_hint_y: None
                    height: dp(80)

                    Label:
                        text: "Nosaukums"
                        font_size: min(root.width, root.height) * 0.035
                        color: (1, 1, 1, 1)
                        bold: True
                        halign: 'left'
                        size_hint_y: None
                        height: dp(30)
                        text_size: self.size

                    CustomTextInput:
                        id: note_title_input
                        hint_text: "Ievadi piezīmes nosaukumu"
                        font_size: min(root.width, root.height) * 0.035
                        size_hint_y: None
                        height: dp(45)
                        multiline: False

                BoxLayout:
                    orientation: "vertical"
                    spacing: dp(5)

                    Label:
                        text: "Saturs"
                        font_size: min(root.width, root.height) * 0.035
                        color: (1, 1, 1, 1)
                        bold: True
                        halign: 'left'
                        size_hint_y: None
                        height: dp(30)
                        text_size: self.size

                    CustomTextInput:
                        id: note_input
                        hint_text: "Ievadi piezīmes tekstu"
                        font_size: min(root.width, root.height) * 0.035
                        size_hint_y: 1
                        multiline: True

                BoxLayout:
                    orientation: "horizontal"
                    size_hint_y: None
                    height: dp(50)
                    spacing: dp(15)

                    Button:
                        text: f'Izvēlies krāsu : {root.chosen_color}'
                        background_color: (0, 0, 0, 0)
                        on_release: root.create_color_dropdown(self)
                        canvas.before:
                            Color:
                                rgba: (0.3, 0.6, 0.9, 1)
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [10]

                    Button:
                        text: f'Izvēlies kategoriju : {root.chosen_category}'
                        background_color: (0, 0, 0, 0)
                        on_release: root.create_category_dropdown(self)
                        canvas.before:
                            Color:
                                rgba: (0.3, 0.6, 0.9, 1)
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [10]

                Button:
                    text: "Saglabāt izmaiņas"
                    font_size: min(root.width, root.height) * 0.035
                    size_hint_y: None
                    height: dp(50)
                    background_color: (0, 0, 0, 0)
                    on_release: root.save_note()
                    canvas.before:
                        Color:
                            rgba: (0.3, 0.8, 0.5, 1)
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [10]

<UserEditWindow>:
    username_input: username_input
    password_input: password_input
    name_input: name_input
    surname_input: surname_input

    canvas.before:
        Color:
            rgba: (0.95, 0.97, 1, 1)
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "horizontal"
        spacing: dp(20)
        padding: dp(20)

        BoxLayout:
            orientation: "vertical"
            size_hint_x: .25
            spacing: dp(15)

            canvas.before:
                Color:
                    rgba: (0.25, 0.25, 0.35, 0.95)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [15]

            Label:
                text: "Rediģēt profilu"
                font_size: min(root.width, root.height) * 0.04
                color: (1, 1, 1, 1)
                bold: True
                size_hint_y: None
                height: dp(60)
                padding: [dp(20), 0]

            Button:
                text: "Atpakaļ"
                font_size: min(root.width, root.height) * 0.025
                size_hint_y: None
                height: dp(50)
                background_color: (0, 0, 0, 0)
                on_release: root.back_to_main()
                canvas.before:
                    Color:
                        rgba: (0.8, 0.3, 0.3, 1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

        BoxLayout:
            orientation: "vertical"
            spacing: dp(20)
            padding: [dp(20), dp(10)]

            canvas.before:
                Color:
                    rgba: (0.25, 0.25, 0.35, 0.95)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [15]

            BoxLayout:
                orientation: "vertical"
                spacing: dp(20)
                padding: [dp(20), dp(20)]

                BoxLayout:
                    orientation: "vertical"
                    spacing: dp(5)
                    size_hint_y: None
                    height: dp(80)

                    Label:
                        text: "Username"
                        font_size: min(root.width, root.height) * 0.035
                        color: (1, 1, 1, 1)
                        bold: True
                        halign: 'left'
                        size_hint_y: None
                        height: dp(30)
                        text_size: self.size

                    CustomTextInput:
                        id: username_input
                        multiline: False
                        font_size: min(root.width, root.height) * 0.035
                        size_hint_y: None
                        height: dp(45)

                BoxLayout:
                    orientation: "vertical"
                    spacing: dp(5)
                    size_hint_y: None
                    height: dp(80)

                    Label:
                        text: "Password"
                        font_size: min(root.width, root.height) * 0.035
                        color: (1, 1, 1, 1)
                        bold: True
                        halign: 'left'
                        size_hint_y: None
                        height: dp(30)
                        text_size: self.size

                    CustomTextInput:
                        id: password_input
                        multiline: False
                        password: True
                        font_size: min(root.width, root.height) * 0.035
                        size_hint_y: None
                        height: dp(45)

                BoxLayout:
                    orientation: "vertical"
                    spacing: dp(5)
                    size_hint_y: None
                    height: dp(80)

                    Label:
                        text: "Name"
                        font_size: min(root.width, root.height) * 0.035
                        color: (1, 1, 1, 1)
                        bold: True
                        halign: 'left'
                        size_hint_y: None
                        height: dp(30)
                        text_size: self.size

                    CustomTextInput:
                        id: name_input
                        multiline: False
                        font_size: min(root.width, root.height) * 0.035
                        size_hint_y: None
                        height: dp(45)

                BoxLayout:
                    orientation: "vertical"
                    spacing: dp(5)
                    size_hint_y: None
                    height: dp(80)

                    Label:
                        text: "Surname"
                        font_size: min(root.width, root.height) * 0.035
                        color: (1, 1, 1, 1)
                        bold: True
                        halign: 'left'
                        size_hint_y: None
                        height: dp(30)
                        text_size: self.size

                    CustomTextInput:
                        id: surname_input
                        multiline: False
                        font_size: min(root.width, root.height) * 0.035
                        size_hint_y: None
                        height: dp(45)

                Button:
                    text: "Saglabāt izmaiņas"
                    font_size: min(root.width, root.height) * 0.035
                    size_hint_y: None
                    height: dp(50)
                    background_color: (0, 0, 0, 0)
                    on_release: root.save_changes()
                    canvas.before:
                        Color:
                            rgba: (0.3, 0.8, 0.5, 1)
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [10]

<SettingsWindow>:
    canvas.before:
        Color:
            rgba: (0.95, 0.97, 1, 1)
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "horizontal"
        spacing: dp(20)
        padding: dp(20)
        
        BoxLayout:
            orientation: "vertical"
            size_hint_x: .25
            spacing: dp(15)

            canvas.before:
                Color:
                    rgba: (0.25, 0.25, 0.35, 0.95)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [15]

            Label:
                text: "Iestatījumi"
                font_size: min(root.width, root.height) * 0.04
                color: (1, 1, 1, 1)
                bold: True
                size_hint_y: None
                height: dp(60)
                padding: [dp(20), 0]

            Button:
                text: "Atpakaļ"
                font_size: min(root.width, root.height) * 0.025
                size_hint_y: None
                height: dp(50)
                background_color: (0, 0, 0, 0)
                on_release: root.back_to_main()
                canvas.before:
                    Color:
                        rgba: (0.8, 0.3, 0.3, 1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

        BoxLayout:
            orientation: "vertical"
            spacing: dp(20)
            padding: [dp(20), dp(10)]

            canvas.before:
                Color:
                    rgba: (0.25, 0.25, 0.35, 0.95)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [15]

            BoxLayout:
                orientation: "vertical"
                spacing: dp(20)
                padding: [dp(20), dp(20)]

                BoxLayout:
                    orientation: "vertical"
                    spacing: dp(10)
                    size_hint_y: None
                    height: dp(120)

                    Label:
                        text: "Fona krāsa"
                        font_size: min(root.width, root.height) * 0.035
                        color: (1, 1, 1, 1)
                        bold: True
                        halign: 'left'
                        size_hint_y: None
                        height: dp(30)
                        text_size: self.size

                    Button:
                        text: f"Pašreizējā krāsa: {root.current_color}"
                        font_size: min(root.width, root.height) * 0.03
                        size_hint_y: None
                        height: dp(50)
                        background_color: (0, 0, 0, 0)
                        on_release: root.dropdown.open(self)
                        canvas.before:
                            Color:
                                rgba: (0.3, 0.6, 0.9, 1)
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [10]

                BoxLayout:
                    orientation: "vertical"
                    spacing: dp(10)
                    size_hint_y: None
                    height: dp(150)

                    Label:
                        text: "Priekšskatījums"
                        font_size: min(root.width, root.height) * 0.035
                        color: (1, 1, 1, 1)
                        bold: True
                        halign: 'left'
                        size_hint_y: None
                        height: dp(30)
                        text_size: self.size

                    BoxLayout:
                        canvas.before:
                            Color:
                                rgba: root.preview_color
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [10]

<UserView>:
    canvas.before:
        Color:
            rgba: (0.95, 0.97, 1, 1)
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "horizontal"
        spacing: dp(20)
        padding: dp(20)

        BoxLayout:
            orientation: "vertical"
            size_hint_x: .25
            spacing: dp(15)

            canvas.before:
                Color:
                    rgba: (0.25, 0.25, 0.35, 0.95)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [15]

            Label:
                text: "Lietotāju pārvaldība"
                font_size: min(root.width, root.height) * 0.04
                color: (1, 1, 1, 1)
                bold: True
                size_hint_y: None
                height: dp(60)
                padding: [dp(20), 0]

            Button:
                text: "Pievienot lietotāju"
                font_size: min(root.width, root.height) * 0.025
                size_hint_y: None
                height: dp(50)
                background_color: (0, 0, 0, 0)
                on_release: root.add_user()
                canvas.before:
                    Color:
                        rgba: (0.3, 0.8, 0.5, 1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

            Button:
                text: "Atpakaļ"
                font_size: min(root.width, root.height) * 0.025
                size_hint_y: None
                height: dp(50)
                background_color: (0, 0, 0, 0)
                on_release: root.back_to_main()
                canvas.before:
                    Color:
                        rgba: (0.8, 0.3, 0.3, 1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

        BoxLayout:
            orientation: "vertical"
            spacing: dp(15)

            ScrollView:
                do_scroll_x: False
                do_scroll_y: True
                bar_width: dp(10)
                bar_color: (0.3, 0.3, 0.4, 1)
                bar_inactive_color: (0.2, 0.2, 0.3, 1)
                effect_cls: "ScrollEffect"
                scroll_type: ['bars']

                GridLayout:
                    id: users_container
                    cols: 1
                    spacing: dp(15)
                    padding: dp(20)
                    size_hint_y: None
                    height: self.minimum_height